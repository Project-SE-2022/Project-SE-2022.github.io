"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[445],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>p});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(a),p=r,y=u["".concat(c,".").concat(p)]||u[p]||m[p]||i;return a?n.createElement(y,o(o({ref:t},d),{},{components:a})):n.createElement(y,o({ref:t},d))}));function p(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5733:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=a(7462),r=(a(7294),a(3905));const i={title:"In Memory DataBase"},o=void 0,s={unversionedId:"architecture/In-memory_Database",id:"architecture/In-memory_Database",title:"In Memory DataBase",description:"1. In Memory DataBase",source:"@site/docs/architecture/In-memory_Database.md",sourceDirName:"architecture",slug:"/architecture/In-memory_Database",permalink:"/architecture/In-memory_Database",draft:!1,editUrl:"https://github.com/Project-SE-2022/Docs/tree/main/my-website/docs/architecture/In-memory_Database.md",tags:[],version:"current",frontMatter:{title:"In Memory DataBase"},sidebar:"tutorialSidebar",previous:{title:"Identity Provider (IDP)",permalink:"/architecture/Identity_Provider"},next:{title:"Intrusion Management API",permalink:"/architecture/Intrusion_Management_API"}},c={},l=[{value:"1. In Memory DataBase",id:"1-in-memory-database",level:2},{value:"Technology",id:"technology",level:4},{value:"Functionality",id:"functionality",level:3}],d={toc:l};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"1-in-memory-database"},"1. In Memory DataBase"),(0,r.kt)("h4",{id:"technology"},"Technology"),(0,r.kt)("p",null,"The technology chosen for the in memory database is Redis, an in memory data structure store."),(0,r.kt)("img",{src:"/img/Redis.png",width:"300"}),(0,r.kt)("h3",{id:"functionality"},"Functionality"),(0,r.kt)("p",null,"The ",(0,r.kt)("em",{parentName:"p"},"Human_Detection_Module"),' class instatiates a dictionary called "database" and this dictionary is sent as a parameter to the ',(0,r.kt)("em",{parentName:"p"},"Human_Detection_Worker")," class when called. This dictionary will contain all the ordered frames sent from the camera.\nIn the ",(0,r.kt)("em",{parentName:"p"},"Human_Detection_Worker")," class the Redis database is instantiated on port ",(0,r.kt)("strong",{parentName:"p"},"6379"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"self.redisDB = redis.Redis(host= 'localhost', port= '6379')"),".\nWe flush database in case its carrying data from an old run using ",(0,r.kt)("inlineCode",{parentName:"p"},"self.redisDB.flushdb()"),"."),(0,r.kt)("p",null,"On the ",(0,r.kt)("em",{parentName:"p"},"create_database_entry")," funtion we get the updateded stored dictionary form the in memory databse, ",(0,r.kt)("inlineCode",{parentName:"p"},'self.database = self.redisDB.hgetall("redisDB")')," decode it and equal it to the current dictionary. we than use this dictionary to add new values and after that it is stored back in the in memory database as a hashmap, using Redis's ",(0,r.kt)("inlineCode",{parentName:"p"},"hmset")," funtion. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\n        self.database = {key.decode('utf-8'):value.decode('utf-8') for key,value in self.database.items()}\n        self.database[num_humans_key] = num_humans\n        self.database[timestamp_key] = ts\n        # Save the updated dictionary into Redis In-Memory Database\n        self.redisDB.hmset(\"redisDB\",self.database)\n\n")),(0,r.kt)("p",null,"Lastly the in memory database is applied to the ",(0,r.kt)("em",{parentName:"p"},"alarm_if_needed")," function, this is done by getting the stored dictionary from the in memory database (",(0,r.kt)("inlineCode",{parentName:"p"},"hgetall")," function) and decoding it (The result is a normal dictionary). The ",(0,r.kt)("em",{parentName:"p"},"alarm_if_needed")," function then analises the frames in the dictionary."))}m.isMDXComponent=!0}}]);